{"version":3,"sources":["../../../../../../../../vendor/filp/whoops/src/Whoops/Resources/js/whoops.base.js"],"names":["Zepto","$","$leftPanel","$frameContainer","$appFramesTab","$allFramesTab","$container","$activeLine","find","$activeFrame","$ajaxEditors","$header","on","height","addClass","removeClass","renderCurrentCodeblock","id","exec","attr","prettyPrint","highlightCurrentLine","activeLineNumber","text","$lines","firstLine","first","val","css","maxHeight","overflow","$offset","length","scrollIntoView","scrollTop","$this","$codeFrame","clipboard","Clipboard","showTooltip","elem","msg","setAttribute","e","clearSelection","trigger","fallbackMessage","action","btn","document","querySelector","addEventListener","currentTarget","removeAttribute","actionMsg","actionKey","test","navigator","userAgent","$node","$parent","nodeOffset","offset","nodeTop","top","nodeBottom","parentScrollTop","parentHeight","applicationFrames","hasClass","frameClass","ctrlKey","which","prev","click","focus","preventDefault","next","setActiveFramesTab","get","href","html","$tab"],"mappings":"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","file":"whoops.base.js","sourcesContent":["Zepto(function($) {\n  var $leftPanel      = $('.left-panel');\n  var $frameContainer = $('.frames-container');\n  var $appFramesTab   = $('#application-frames-tab');\n  var $allFramesTab   = $('#all-frames-tab');\n  var $container      = $('.details-container');\n  var $activeLine     = $frameContainer.find('.frame.active');\n  var $activeFrame    = $container.find('.frame-code.active');\n  var $ajaxEditors    = $('.editor-link[data-ajax]');\n  var $header         = $('header');\n\n  $header.on('mouseenter', function () {\n    if ($header.find('.exception').height() >= 145) {\n      $header.addClass('header-expand');\n    }\n  });\n  $header.on('mouseleave', function () {\n    $header.removeClass('header-expand');\n  });\n\n  /*\n   * add prettyprint classes to our current active codeblock\n   * run prettyPrint() to highlight the active code\n   * scroll to the line when prettyprint is done\n   * highlight the current line\n   */\n  var renderCurrentCodeblock = function(id) {\n\n    // remove previous codeblocks so we only render the active one\n    $('.code-block').removeClass('prettyprint');\n\n    // pass the id in when we can for speed\n    if (typeof(id) === 'undefined' || typeof(id) === 'object') {\n      var id = /frame\\-line\\-([\\d]*)/.exec($activeLine.attr('id'))[1];\n    }\n\n    $('#frame-code-linenums-' + id).addClass('prettyprint');\n    $('#frame-code-args-' + id).addClass('prettyprint');\n\n    prettyPrint(highlightCurrentLine);\n\n  }\n\n  /*\n   * Highlight the active and neighboring lines for the current frame\n   * Adjust the offset to make sure that line is veritcally centered\n   */\n\n  var highlightCurrentLine = function() {\n    var activeLineNumber = +($activeLine.find('.frame-line').text());\n    var $lines           = $activeFrame.find('.linenums li');\n    var firstLine        = +($lines.first().val());\n\n    // We show more code than needed, purely for proper syntax highlighting\n    // Let’s hide a big chunk of that code and then scroll the remaining block\n    $activeFrame.find('.code-block').first().css({\n      maxHeight: 345,\n      overflow: 'hidden',\n    });\n\n    var $offset = $($lines[activeLineNumber - firstLine - 10]);\n    if ($offset.length > 0) {\n      $offset[0].scrollIntoView();\n    }\n\n    $($lines[activeLineNumber - firstLine - 1]).addClass('current');\n    $($lines[activeLineNumber - firstLine]).addClass('current active');\n    $($lines[activeLineNumber - firstLine + 1]).addClass('current');\n\n    $container.scrollTop(0);\n\n  }\n\n  /*\n   * click handler for loading codeblocks\n   */\n\n  $frameContainer.on('click', '.frame', function() {\n\n    var $this  = $(this);\n    var id     = /frame\\-line\\-([\\d]*)/.exec($this.attr('id'))[1];\n    var $codeFrame = $('#frame-code-' + id);\n\n    if ($codeFrame) {\n\n      $activeLine.removeClass('active');\n      $activeFrame.removeClass('active');\n\n      $this.addClass('active');\n      $codeFrame.addClass('active');\n\n      $activeLine  = $this;\n      $activeFrame = $codeFrame;\n\n      renderCurrentCodeblock(id);\n\n    }\n\n  });\n\n  var clipboard = new Clipboard('.clipboard');\n  var showTooltip = function(elem, msg) {\n    elem.setAttribute('class', 'clipboard tooltipped tooltipped-s');\n    elem.setAttribute('aria-label', msg);\n  };\n\n  clipboard.on('success', function(e) {\n      e.clearSelection();\n\n      showTooltip(e.trigger, 'Copied!');\n  });\n\n  clipboard.on('error', function(e) {\n      showTooltip(e.trigger, fallbackMessage(e.action));\n  });\n\n  var btn = document.querySelector('.clipboard');\n\n  btn.addEventListener('mouseleave', function(e) {\n    e.currentTarget.setAttribute('class', 'clipboard');\n    e.currentTarget.removeAttribute('aria-label');\n  });\n\n  function fallbackMessage(action) {\n    var actionMsg = '';\n    var actionKey = (action === 'cut' ? 'X' : 'C');\n\n    if (/Mac/i.test(navigator.userAgent)) {\n        actionMsg = 'Press ⌘-' + actionKey + ' to ' + action;\n    } else {\n        actionMsg = 'Press Ctrl-' + actionKey + ' to ' + action;\n    }\n\n    return actionMsg;\n  }\n\n  function scrollIntoView($node, $parent) {\n    var nodeOffset = $node.offset();\n    var nodeTop = nodeOffset.top;\n    var nodeBottom = nodeTop + nodeOffset.height;\n    var parentScrollTop = $parent.scrollTop();\n    var parentHeight = $parent.height();\n\n    if (nodeTop < 0) {\n      $parent.scrollTop(parentScrollTop + nodeTop);\n    } else if (nodeBottom > parentHeight) {\n      $parent.scrollTop(parentScrollTop + nodeBottom - parentHeight);\n    }\n  }\n\n  $(document).on('keydown', function(e) {\n    var applicationFrames = $frameContainer.hasClass('frames-container-application'),\n        frameClass = applicationFrames ? '.frame.frame-application' : '.frame';\n\n\t  if(e.ctrlKey || e.which === 74  || e.which === 75) {\n\t\t  // CTRL+Arrow-UP/k and Arrow-Down/j support:\n\t\t  // 1) select the next/prev element\n\t\t  // 2) make sure the newly selected element is within the view-scope\n\t\t  // 3) focus the (right) container, so arrow-up/down (without ctrl) scroll the details\n\t\t  if (e.which === 38 /* arrow up */ || e.which === 75 /* k */) {\n\t\t\t  $activeLine.prev(frameClass).click();\n\t\t\t  scrollIntoView($activeLine, $leftPanel);\n\t\t\t  $container.focus();\n\t\t\t  e.preventDefault();\n\t\t  } else if (e.which === 40 /* arrow down */ || e.which === 74 /* j */) {\n\t\t\t  $activeLine.next(frameClass).click();\n\t\t\t  scrollIntoView($activeLine, $leftPanel);\n\t\t\t  $container.focus();\n\t\t\t  e.preventDefault();\n\t\t  }\n\t  } else if (e.which == 78 /* n */) {\n      if ($appFramesTab.length) {\n        setActiveFramesTab($('.frames-tab:not(.frames-tab-active)'));\n      }\n    }\n  });\n\n  // Render late enough for highlightCurrentLine to be ready\n  renderCurrentCodeblock();\n\n  // Avoid to quit the page with some protocol (e.g. IntelliJ Platform REST API)\n  $ajaxEditors.on('click', function(e){\n    e.preventDefault();\n    $.get(this.href);\n  });\n\n  // Symfony VarDumper: Close the by default expanded objects\n  $('.sf-dump-expanded')\n    .removeClass('sf-dump-expanded')\n    .addClass('sf-dump-compact');\n  $('.sf-dump-toggle span').html('&#9654;');\n\n  // Make the given frames-tab active\n  function setActiveFramesTab($tab) {\n    $tab.addClass('frames-tab-active');\n\n    if ($tab.attr('id') == 'application-frames-tab') {\n      $frameContainer.addClass('frames-container-application');\n      $allFramesTab.removeClass('frames-tab-active');\n    } else {\n      $frameContainer.removeClass('frames-container-application');\n      $appFramesTab.removeClass('frames-tab-active');\n    }\n  }\n\n  $('a.frames-tab').on('click', function(e) {\n    e.preventDefault();\n    setActiveFramesTab($(this));\n  });\n});\n"]}